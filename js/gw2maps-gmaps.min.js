Ajax.Responders.register({onCreate:function(f){f=f.transport;f.setRequestHeader=f.setRequestHeader.wrap(function(a,b,d){if(/^(accept|accept-language|content-language)$/i.test(b)||/^content-type$/i.test(b)&&/^(application\/x-www-form-urlencoded|multipart\/form-data|text\/plain)(;.+)?$/i.test(d))return a(b,d)})}});
var GW2Maps={init:function(f){if("object"!==typeof f)return!1;google.maps.visualRefresh=!0;var a=GW2Maps.options(f),b=function(c){return GW2Maps.fromPointToLatLng(c,a.max_zoom)},d={continent:a.continent_id,layers:{},linkbox:(new Element("div",{"class":"linkbox"})).setStyle({width:a.linkbox,height:a.height}),map:new google.maps.Map(f,{zoom:3,minZoom:1,maxZoom:7,center:1===a.continent_id?b([8100,7300]):b([10600,14600]),streetViewControl:!1,panControl:a.map_controls,zoomControl:a.map_controls,mapTypeId:a.continent_id.toString(),
mapTypeControlOptions:{mapTypeIds:["1","2"]}}),markers:[],popups:new google.maps.InfoWindow},g=function(c,a){return 0>c.y||0>c.x||c.y>=1<<a||c.x>=1<<a?"http://wiki-de.guildwars2.com/images/6/6f/Kartenhintergrund.png":"https://tiles.guildwars2.com/"+d.map.getMapTypeId()+"/1/"+a+"/"+c.x+"/"+c.y+".jpg"},k=new google.maps.Size(256,256),m=new google.maps.ImageMapType({maxZoom:7,alt:"Tyria",name:"Tyria",tileSize:k,getTileUrl:g}),g=new google.maps.ImageMapType({maxZoom:6,alt:"Die Nebel",name:"Die Nebel",
tileSize:k,getTileUrl:g}),e=new google.maps.LatLngBounds(b([0,256*(1<<a.max_zoom)]),b([256*(1<<a.max_zoom),0]));d.map.mapTypes.set("1",m);d.map.mapTypes.set("2",g);a.linkbox?(m=(new Element("div",{"class":"table-cell"})).setStyle({width:"100%"}),f.setStyle({width:"100%",height:a.height}).wrap(m).wrap((new Element("div",{"class":"table-row"})).setStyle({width:a.width})),m.insert({after:d.linkbox.wrap(new Element("div",{"class":"table-cell"}))})):f.setStyle({width:a.width,height:a.height});google.maps.event.addListener(d.map,
"center_changed",function(){if(!e.contains(d.map.getCenter())){var c=d.map.getCenter(),a=c.lng(),c=c.lat(),b=e.getNorthEast().lng(),f=e.getNorthEast().lat(),g=e.getSouthWest().lng(),k=e.getSouthWest().lat();a<g&&(a=g);a>b&&(a=b);c<k&&(c=k);c>f&&(c=f);d.map.panTo(new google.maps.LatLng(c,a))}});google.maps.event.addListener(d.map,"click",function(c){var e=GW2Maps.fromLatLngToPoint(c.latLng,a.max_zoom),f=b([e.x,e.y]);d.popups.setContent("latlng:"+c.latLng.toString()+"<br />pixel:"+e.toString()+"<br />latlng:"+
f.toString()+" (from pixel)");d.popups.setPosition(c.latLng);d.popups.open(d.map)});return d},fromLatLngToPoint:function(f,a){var b=new google.maps.Point(0,0),d=new google.maps.Point(128,128),g=1<<a,k;k=Math.sin(f.lat()*(Math.PI/180));k=Math.max(k,-0.9999);k=Math.min(k,0.9999);b.x=d.x+f.lng()*(256/360);b.y=d.y+0.5*Math.log((1+k)/(1-k))*-(256/(2*Math.PI));return new google.maps.Point(Math.floor(b.x*g),Math.floor(b.y*g))},fromPointToLatLng:function(f,a){var b=new google.maps.Point(f[0],f[1]),d=256*
(1<<a),g=(2*Math.atan(Math.exp((b.y-d/2)/-(d/(2*Math.PI))))-Math.PI/2)*(180/Math.PI);return new google.maps.LatLng(g,(b.x-d/2)*(360/d))},options:function(f){var a={};$A(f.attributes).each(function(b){b.name.match(/^data-/)&&(a[b.name.substr(5)]="data-polyline"===b.name?b.value:phpjs.intval(b.value))});f=["en","de","en","es","fr"];var b=[!1,"landmark","sector","skill","task","vista","waypoint"],d="number"===typeof a.continent_id&&1<=a.continent_id&&2>=a.continent_id?a.continent_id:1;return{max_zoom:1==
d?7:6,continent_id:d,floor_id:"number"===typeof a.floor_id?a.floor_id:2,region_id:"number"===typeof a.region_id&&0<a.region_id?a.region_id:!1,map_id:"number"===typeof a.map_id&&0<a.map_id?a.map_id:!1,poi_id:"number"===typeof a.poi_id&&0<a.poi_id?a.poi_id:!1,poi_type:"number"===typeof a.poi_type&&0<a.poi_type&&6>=a.poi_type?b[a.poi_type]:!1,width:"number"===typeof a.width&&0<a.width?a.width+(!0==a.w_percent?"%":"px"):"800px",height:"number"===typeof a.height&&0<a.height?a.height+(!0==a.h_percent?"%":
"px"):"450px",map_controls:!0!=a.disable_controls,linkbox:"number"===typeof a.linkbox&&100<=a.linkbox?a.linkbox+"px":!1,polyline:a.polyline&&7<a.polyline.length?a.polyline:!1,i18n:"number"===typeof a.language&&1<=a.language&&4>=a.language?GW2Maps.i18n[f[a.language]]:GW2Maps.i18n[f[0]]}},i18n:{de:{lang:"de",wiki:"http://wiki-de.guildwars2.com/wiki/",icon_event:{link:"http://wiki-de.guildwars2.com/images/7/7a/Event_Angriff_Icon.png",size:[24,24]},icon_landmark:{link:"http://wiki-de.guildwars2.com/images/0/0f/Sehensw\u00fcrdigkeit_Icon.png",
size:[16,16]},icon_skill:{link:"http://wiki-de.guildwars2.com/images/c/c3/Fertigkeitspunkt_Icon.png",size:[20,20]},icon_task:{link:"http://wiki-de.guildwars2.com/images/b/b7/Aufgabe_Icon.png",size:[20,20]},icon_vista:{link:"http://wiki-de.guildwars2.com/images/9/9f/Aussichtspunkt_Icon.png",size:[20,20]},icon_waypoint:{link:"http://wiki-de.guildwars2.com/images/d/df/Wegmarke_Icon.png",size:[24,24]},errortile:"http://wiki-de.guildwars2.com/images/6/6f/Kartenhintergrund.png",event:"Events",landmark:"Sehensw\u00fcrdigkeiten",
players:"Spieler",polyline:"Polylinien",sector:"Zonen",skill:"Fertigkeitspunkte",task:"Aufgaben",vista:"Aussichtspunkte",waypoint:"Wegpunkte",attribution:"Kartendaten und -bilder"},en:{lang:"en",wiki:"http://wiki.guildwars2.com/wiki/",icon_event:{link:"http://wiki-de.guildwars2.com/images/7/7a/Event_Angriff_Icon.png",size:[24,24]},icon_landmark:{link:"http://wiki.guildwars2.com/images/f/fb/Point_of_interest.png",size:[20,20]},icon_skill:{link:"http://wiki.guildwars2.com/images/8/84/Skill_point.png",
size:[20,20]},icon_task:{link:"http://wiki.guildwars2.com/images/f/f8/Complete_heart_(map_icon).png",size:[20,20]},icon_vista:{link:"http://wiki.guildwars2.com/images/d/d9/Vista.png",size:[20,20]},icon_waypoint:{link:"http://wiki.guildwars2.com/images/d/d2/Waypoint_(map_icon).png",size:[20,20]},errortile:"http://wiki-de.guildwars2.com/images/6/6f/Kartenhintergrund.png",event:"Events",landmark:"Points of Interest",players:"Players",polyline:"Polylines",sector:"Sector Names",skill:"Skill Challenges",
task:"Tasks",vista:"Vistas",waypoint:"Waypoints",attribution:"Map data and imagery"},es:{lang:"es",wiki:"http://wiki-es.guildwars2.com/wiki/",icon_event:{link:"http://wiki-de.guildwars2.com/images/7/7a/Event_Angriff_Icon.png",size:[24,24]},icon_landmark:{link:"http://wiki.guildwars2.com/images/f/fb/Point_of_interest.png",size:[20,20]},icon_skill:{link:"http://wiki.guildwars2.com/images/8/84/Skill_point.png",size:[20,20]},icon_task:{link:"http://wiki.guildwars2.com/images/f/f8/Complete_heart_(map_icon).png",
size:[20,20]},icon_vista:{link:"http://wiki.guildwars2.com/images/d/d9/Vista.png",size:[20,20]},icon_waypoint:{link:"http://wiki.guildwars2.com/images/d/d2/Waypoint_(map_icon).png",size:[20,20]},errortile:"http://wiki-de.guildwars2.com/images/6/6f/Kartenhintergrund.png",event:"event-es",landmark:"poi-es",players:"players-es",polyline:"polyline-es",sector:"sector-es",skill:"skill-es",task:"task-es",vista:"vista-es",waypoint:"waypoint-es",attribution:"attribution-es"},fr:{lang:"fr",wiki:"http://wiki-fr.guildwars2.com/wiki/",
icon_event:{link:"http://wiki-de.guildwars2.com/images/7/7a/Event_Angriff_Icon.png",size:[24,24]},icon_landmark:{link:"http://wiki-fr.guildwars2.com/images/d/d2/Ic\u00f4ne_site_remarquable_d\u00e9couvert.png",size:[20,20]},icon_skill:{link:"http://wiki-fr.guildwars2.com/images/5/5c/Progression_d\u00e9fi.png",size:[20,20]},icon_task:{link:"http://wiki-fr.guildwars2.com/images/a/af/Ic\u00f4ne_coeur_plein.png",size:[20,20]},icon_vista:{link:"http://wiki-fr.guildwars2.com/images/8/82/Ic\u00f4ne_panorama.png",
size:[20,20]},icon_waypoint:{link:"http://wiki-fr.guildwars2.com/images/5/56/Progression_passage.png",size:[20,20]},errortile:"http://wiki-de.guildwars2.com/images/6/6f/Kartenhintergrund.png",event:"event-fr",landmark:"Sites remarquables",players:"players-fr",polyline:"polyline-fr",sector:"Secteurs",skill:"D\u00e9fis de comp\u00e9tences",task:"C\u0153urs",vista:"Panoramas",waypoint:"Points de passage",attribution:"attribution-fr"}}},phpjs={intval:function(f,a){var b;b=typeof f;return"boolean"===b?
+f:"string"===b?(b=parseInt(f,a||10),isNaN(b)||!isFinite(b)?0:b):"number"===b&&isFinite(f)?f|0:0},array_multisort:function(f){var a={SORT_REGULAR:16,SORT_NUMERIC:17,SORT_STRING:18,SORT_ASC:32,SORT_DESC:40},b=0,d=[[]],g=[[]],k=[0],m=0,e=0,c,s="",b=0,t=[],n=0,b=null,r=[],q=[],n=[],l=[],p=0,u=function(){return r.shift()},v=[[function(a,b){q.push(a>b?1:a<b?-1:0);return a>b?1:a<b?-1:0},function(a,b){q.push(b>a?1:b<a?-1:0);return b>a?1:b<a?-1:0}],[function(a,b){q.push(a-b);return a-b},function(a,b){q.push(b-
a);return b-a}],[function(a,b){q.push(a+"">b+""?1:a+""<b+""?-1:0);return a+"">b+""?1:a+""<b+""?-1:0},function(a,b){q.push(b+"">a+""?1:b+""<a+""?-1:0);return b+"">a+""?1:b+""<a+""?-1:0}]];if("[object Array]"===Object.prototype.toString.call(f))d[0]=f;else if(f&&"object"===typeof f)for(e in f)f.hasOwnProperty(e)&&(g[0].push(e),d[0].push(f[e]));else return!1;var b=d[0].length,h=[0,b];for(c=1;c<arguments.length;c++)if("[object Array]"===Object.prototype.toString.call(arguments[c])){if(d[c]=arguments[c],
k[c]=0,arguments[c].length!==b)return!1}else if(arguments[c]&&"object"===typeof arguments[c]){g[c]=[];d[c]=[];k[c]=0;for(e in arguments[c])arguments[c].hasOwnProperty(e)&&(g[c].push(e),d[c].push(arguments[c][e]));if(d[c].length!==b)return!1}else if("string"===typeof arguments[c]){n=k.pop();if("undefined"===typeof a[arguments[c]]||0<(a[arguments[c]]>>>4&n>>>4))return!1;k.push(n+a[arguments[c]])}else return!1;for(e=0;e!==b;e++)t.push(!0);for(e in d)if(d.hasOwnProperty(e)){n=[];l=[];p=0;r=[];q=[];if(0===
h.length)if("[object Array]"===Object.prototype.toString.call(arguments[e]))arguments[e]=d[e];else{for(s in arguments[e])arguments[e].hasOwnProperty(s)&&delete arguments[e][s];b=d[e].length;for(n=c=0;c<b;c++)n=g[e][c],arguments[e][n]=d[e][c]}else{a=v[k[e]&3][0<(k[e]&8)?1:0];for(b=0;b!==h.length;b+=2)for(m in l=d[e].slice(h[b],h[b+1]+1),l.sort(a),n[b]=[].concat(q),p=h[b],l)l.hasOwnProperty(m)&&(d[e][p]=l[m],p++);a=u;for(c in d)if(d.hasOwnProperty(c)&&d[c]!==d[e])for(b=0;b!==h.length;b+=2)for(m in l=
d[c].slice(h[b],h[b+1]+1),r=[].concat(n[b]),l.sort(a),p=h[b],l)l.hasOwnProperty(m)&&(d[c][p]=l[m],p++);for(c in g)if(g.hasOwnProperty(c))for(b=0;b!==h.length;b+=2)for(m in l=g[c].slice(h[b],h[b+1]+1),r=[].concat(n[b]),l.sort(a),p=h[b],l)l.hasOwnProperty(m)&&(g[c][p]=l[m],p++);b=null;h=[];for(c in d[e])d[e].hasOwnProperty(c)&&(t[c]?h.length&1?d[e][c]!==b&&(h.push(c-1),b=d[e][c]):(null!==b&&(d[e][c]===b?h.push(c-1):t[c]=!1),b=d[e][c]):(h.length&1&&h.push(c-1),b=null));h.length&1&&h.push(c);if("[object Array]"===
Object.prototype.toString.call(arguments[e]))arguments[e]=d[e];else{for(c in arguments[e])arguments[e].hasOwnProperty(c)&&delete arguments[e][c];b=d[e].length;for(n=c=0;c<b;c++)n=g[e][c],arguments[e][n]=d[e][c]}}delete d[e];delete g[e]}return!0}};
